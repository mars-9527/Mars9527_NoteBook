---
tags:
  - Shell
  - Git
---
# 问题
每次按键盘上的 return 时，会插入一个称为行结束符的不可见字符。 不同的操作系统处理行结束符的方式不同。
在使用 Git 和 GitHub 协作处理项目时，Git 可能产生意外结果，例如，您在 Windows 计算机上操作，而您的协作者是在 macOS 中做的更改。
或者一般常见的场景是在Windows上编写的脚本，要部署到Linux上，这种情况脚本是不能正常执行的。

# 解决
您可以将 Git 配置为自动处理行结束符，以便与使用不同操作系统的人员有效地协作。
## 1.行结束符的全局设置

`git config --global core.autocrlf input`
`core.autocrlf input`的意思是告诉Git在检出代码时不要自动将行尾转换为CRLF，而是保留原来的LF。这通常用于跨平台协作开发，以避免因行尾转换导致的代码变化和冲突。

**core.autocrlf**`三种配置项（true、input、false）
`core.autocrlf`是一个Git的配置项，它有三个可选值
true：在检出代码时自动将行尾转换为CRLF，在提交代码时自动将行尾转换为LF。
```shell
git config --global core.autocrlf true
```
input：在检出代码时不自动转换行尾，在提交代码时自动将行尾转换为LF。
```shell
git config --global core.autocrlf input
```
false：在检出和提交代码时都不自动转换行尾。
```shell
git config --global core.autocrlf false
```

## 2.按仓库设置相关文档

你可以选择配置 `.gitattributes` 文件来管理 Git 读取特定存储库中的行结束符的方式。 将此文件提交到存储库时，它将覆盖所有存储库贡献者的 `core.autocrlf` 设置。 这可确保所有用户的行为一致，而不管其 Git 设置和环境如何。

`.gitattributes` 文件必须在存储库的根目录下创建，且像任何其他文件一样提交。

`.gitattributes` 文件看上去像一个两列表格：
- 左侧是 Git 要匹配的文件名。
- 右侧是 Git 应对这些文件使用的行结束符配置。
### 示例
下面是一个示例 `.gitattributes` 文件。 您可以将其用作仓库的模板：

```text
# Set the default behavior, in case people don't have core.autocrlf set.
* text=auto

# Explicitly declare text files you want to always be normalized and converted
# to native line endings on checkout.
*.c text
*.h text

# Declare files that will always have CRLF line endings on checkout.
*.sln text eol=crlf

# Denote all files that are truly binary and should not be modified.
*.png binary
*.jpg binary
```

你会注意到，文件是匹配的，即 `*.c`、`*.sln`、`*.png`（用空格分隔），然后给定一个设置，即 `text`、`text eol=crlf`、`binary`。 我们将在下面介绍一些可能的设置。

- `text=auto` Git 将以其认为的最佳方式处理文件。 这是一个合适的默认选项。
    
- 在检出时 `text eol=crlf` Git 将始终把行结束符转换为 `CRLF`。 你应将其用于必须保持 `CRLF` 结束符的文件，即使在 OSX 或 Linux 上。
    
- 在检出时 `text eol=lf` Git 将始终把行结束符转换为 `LF`。 您应将其用于必须保持 LF 结束符的文件，即使在 Windows 上。
    
- `binary` Git 会理解指定文件不是文本，并且不应尝试更改这些文件。 该 `binary` 设置也是 `-text -diff` 的别名。
# 相关资料
[Git 优雅处理行结束符 - 掘金 (juejin.cn)](https://juejin.cn/post/6942320745494085669)
[配置 Git 处理行结束符 - GitHub 文档](https://docs.github.com/zh/get-started/getting-started-with-git/configuring-git-to-handle-line-endings?platform=windows)