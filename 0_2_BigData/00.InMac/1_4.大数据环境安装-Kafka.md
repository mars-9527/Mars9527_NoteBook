---
tags:
  - Kafka
  - Mac
---

# 1.下载

在这个地址下载Apache下的所有软件
[Index of /dist (apache.org)](http://archive.apache.org/dist/)

注意与zookeeper的兼容性
可以通过源码包的gradle的配置看到或者通过在安装包的lib下可以看到对应版本的zk jar包
[确定kafka对应的zookeeper版本-CSDN博客](https://blog.csdn.net/dkz97/article/details/128282225?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-128282225-blog-129577371.235%5Ev36%5Epc_relevant_anti_vip&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-128282225-blog-129577371.235%5Ev36%5Epc_relevant_anti_vip&utm_relevant_index=2)

又因为当前安装使用的Hadoop版本为3.2.1，依赖的zookeeper为3.4.13，而kafka启动的时候会检测版本冲突，环境中的zk版本（不只是安装的zk版本，还有环境中的zk依赖版本），为了整体可用，所以选择zk编译版本为3.4.13对应的kafka版本2.2.2


# 2.配置

根目录创建日志目录 `logs`  /usr/local/bigdata/kafka/kafka_2.11-2.2.2/logs

修改配置文件`/usr/local/bigdata/kafka/kafka_2.11-2.2.2/config/server.properties`

```properties

#删除topic功能使能
delete.topic.enable=true

listeners=PLAINTEXT://localhost:9092

log.dirs=/usr/local/bigdata/kafka/kafka_2.12-2.8.2/logs

zookeeper.connect=localhost:2181

```

# 3.运行&指令

```shell
nohup kafka-server-start.sh $KK_HOME/config/server.properties >$KK_HOME/logs/console.log 2>&1 &

kafka-server-stop.sh


kafka-topics.sh --list --bootstrap-server localhost:9092

kafka-topics.sh --list --zookeeper localhost:2181

kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic test

kafka-topics.sh --zookeeper localhost:2181 --delete --topic test

kafka-console-producer.sh --broker-list localhost:9092 --topic test-topic
```



# 4.相关问题解决

## 4.1 /Library/Internet: No such file or directory

```log
/usr/local/bigdata/kafka/kafka_2.11-2.2.2/bin/kafka-run-class.sh: line 306: /Library/Internet: No such file or directory
```

**解决：**
[Kafka 查看topic报“No such file or directory”异常-腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1991367)

或者直接修改JAVA的安装目录为不带空格的

```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-1.8.jdk/Contents/Home
```
